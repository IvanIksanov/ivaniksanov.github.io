<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Страница авторизации</title>
    <script>
        (function () {
            const saved = localStorage.getItem('theme');
            if (saved === 'dark' || saved === 'light') {
                document.documentElement.setAttribute('data-theme', saved);
            }
        })();
    </script>
    <link rel="stylesheet" href="header.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="pageBooks.css">
    <link rel="icon" href="img/QAtoDev_PageIcon.png" sizes="32x32" type="image/png">
    <!-- Доп. минимальные стили только для поп-апа -->
    <style>
        :root {
          --login-bg: #fafafa;
          --login-card: #ffffff;
          --login-text: #1a1a1a;
          --login-muted: #6b7280;
          --login-border: #e5e7eb;
          --login-accent: #ffa001;
          --login-accent-2: #44bbc1;
          --login-ring: rgba(255,160,1,.35);
          --ok: #16a34a;
          --bad: #ef4444;
          --pending: #9ca3af;

          /* Лейаут */
          --page-max: 1160px;
          --gap: 16px;
          --stick-top: 16px; /* отступ для sticky-формы слева */
          --checks-max-h: calc(100vh - var(--stick-top) - 160px); /* высота скролла чек-листа */

          /* Задание (слайдер) */
          --task-border: #ffd9a6; /* светло-оранжевая рамка */
          --task-bg: #fffdf8;
          --task-dot-bg: #ffe7c4;
          --task-dot-active: #ffa001;
          --task-shadow: 0 2px 10px rgba(255,160,1,.15);
        }
        :root[data-theme="dark"] {
          --login-bg: #1a1a1a;
          --login-card: #242424;
          --login-text: #e7e7e7;
          --login-muted: #a1a1aa;
          --login-border: #383838;
          --login-accent: #ffa001;
          --login-accent-2: #44bbc1;
          --login-ring: rgba(255,160,1,.55);
          --ok: #22c55e;
          --bad: #f87171;
          --pending: #9ca3af;

          /* Задание (слайдер) */
          --task-border: #ffb869;
          --task-bg: #2a241b;
          --task-dot-bg: #3b3022;
          --task-dot-active: #ffa001;
          --task-shadow: 0 2px 10px rgba(255,160,1,.18);
        }

         /* Вместо глобального reset */
        .login-scope,
        .login-scope * ,
        .login-scope *::before,
        .login-scope *::after {
          box-sizing: border-box;
        }

        /* Общие правки для устойчивости */
        *, *::before, *::after { box-sizing: border-box; }

        /* === Плашка заданий — компактная версия === */
        /* Вставь этот блок НИЖЕ текущих стилей, чтобы он их перекрыл */

        .task-slider {
          padding: 10px 12px;              /* было 14px 16px */
          border-radius: 10px;             /* чуть компактнее скругление */
          border: 1px solid var(--task-border);
          background: var(--task-bg);
          box-shadow: var(--task-shadow);
          margin: 10px auto;               /* немного меньше внешние отступы */
          max-width: var(--page-max);
        }

        .task-slider-header {
          margin-bottom: 6px;              /* было 10px */
        }

        .task-slider-title {
          margin: 0;
          font-size: 1rem;                 /* было 1.05rem */
          line-height: 1.2;                /* плотнее заголовок */
          color: var(--login-text);
          font-family: "Fira Code", monospace;
        }

        .task-viewport {
          overflow: hidden;
          border-radius: 8px;
          min-height: 48px;                /* было 64px — меньше высота без прыжков */
          background: transparent;
        }

        .task-track {
          display: flex;
          width: 400%;
          transform: translateX(0%);
          transition: transform .25s ease;
          will-change: transform;
        }

        .task-slide {
          flex: 0 0 25%;
          width: 100%;
          padding: 4px 6px 6px;            /* было 8px 6px 10px */
        }

        .task-item {
          margin: 0;
          font-size: .95rem;               /* чуть меньше текст */
          line-height: 1.28;               /* плотнее межстрочный интервал */
          color: var(--login-text);
        }

        /* Пагинация сделана компактнее */
        .task-pagination {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 6px;                        /* было 8px */
          padding-top: 4px;                /* было 6px */
          border-top: 1px dashed var(--task-border);
        }

        .task-dot {
          width: 26px;                     /* было 30px */
          height: 26px;
          border-radius: 999px;
          border: 1px solid var(--task-border);
          background: var(--task-dot-bg);
          color: var(--login-text);
          font-size: .9rem;                /* было .95rem */
          line-height: 1;
          cursor: pointer;
          display: inline-flex;
          align-items: center;
          justify-content: center;
          transition: transform .08s ease, background-color .15s ease, border-color .15s ease;
        }

        .task-dot:hover { transform: translateY(-1px); }

        .task-dot[aria-pressed="true"] {
          background: var(--task-dot-active);
          color: #1a1a1a;
          border-color: var(--task-dot-active);
        }

        /* Ещё более плотный режим на узких экранах */
        @media (max-width: 480px) {
          .task-slider       { padding: 8px 10px; }
          .task-viewport     { min-height: 44px; }
          .task-item         { font-size: .93rem; line-height: 1.24; }
          .task-dot          { width: 24px; height: 24px; font-size: .85rem; }
        }


        /* ====== ДВУХКОЛОНОЧНЫЙ ЛЕЙАУТ: слева форма (sticky), справа чек-лист (скролл) ====== */
        .login-layout {
          max-width: var(--page-max);
          margin: 1rem auto 1.25rem;
          display: grid;
          grid-template-columns: minmax(300px, 460px) minmax(0, 1fr);
          gap: var(--gap);
          align-items: start;
          padding-inline: 0px;
        }
        .login-left .login-wrap {
          position: sticky;
          top: var(--stick-top);
          margin: 0;
          width: 100%;
        }
        .login-right .checks-panel {
          border: 1px solid var(--login-border);
          border-radius: 14px;
          padding: .75rem;
          background: color-mix(in oklab, var(--login-card) 92%, var(--login-bg));
          max-height: var(--checks-max-h);
          overflow: auto;
          -webkit-overflow-scrolling: touch;
        }
        @media (max-width: 900px) {
          .login-layout {
            grid-template-columns: 1fr;
            gap: 12px;
          }
          .login-left {
            position: sticky;
            top: var(--stick-top);
            z-index: 8;
          }
          .login-left .login-wrap { position: static; }
          .login-right .checks-panel {
            max-height: var(--mobile-checks-max-h, 52dvh);
            overflow: auto;
            overscroll-behavior: contain;
          }
        }
        .checks-title {
          margin: 0 .25rem .5rem;
          font-family: "Fira Code", monospace;
          font-size: 1.0rem;
          color: var(--login-text);
        }

        /* ====== Контейнер формы ====== */
        .login-wrap {
          background: var(--login-card);
          border: 1px solid var(--login-border);
          border-radius: 16px;
          padding: 1rem;
        }

        /* ====== Инлайн-ошибка вместо поп-апа ====== */
        .inline-error {
          display: none;
          border: 1px solid var(--bad);
          background: rgba(239,68,68,.10);
          background: color-mix(in oklab, var(--bad) 10%, transparent);
          color: var(--bad);
          padding: .6rem .75rem;
          border-radius: 10px;
          margin: 0 0 .75rem 0;
          font-size: .95rem;
        }
        .inline-error.show { display: block; }
        .inline-error small { color: var(--login-muted); display:block; margin-top: .25rem; }

        /* ====== Свитчер (Телефон / Email) ====== */
        .segmented {
          position: relative;
          display: grid;
          grid-template-columns: 1fr 1fr;
          background: var(--login-bg);
          border: 1px solid var(--login-border);
          border-radius: 999px;
          padding: 4px;
          margin: .25rem auto 1rem;
          max-width: 360px;
        }
        .segmented .thumb {
          position: absolute;
          top: 4px; bottom: 4px;
          width: calc(50% - 4px);
          background: var(--login-card);
          border: 1px solid var(--login-border);
          border-radius: 999px;
          transition: transform .25s ease;
          will-change: transform;
        }
        .segmented[data-active="email"] .thumb { transform: translateX(100%); }
        .segmented button {
          position: relative;
          z-index: 1;
          border: 0;
          background: transparent;
          color: var(--login-text);
          padding: .5rem .75rem;
          border-radius: 999px;
          cursor: pointer;
          font-size: .95rem;
        }
        .segmented button[aria-pressed="true"] { color: var(--login-accent-2); }
        .segmented button:hover { color: var(--login-accent); }

        /* ====== Поля ввода ====== */
        .input-container { margin-bottom: .85rem; }
        .field {
          position: relative;
          display: flex;
          align-items: center;
          background: var(--login-bg);
          border: 1px solid var(--login-border);
          border-radius: 12px;
          padding: .0rem .1rem .1rem .65rem;
          transition: box-shadow .2s ease, border-color .2s ease, background .2s ease;
        }
        .field:focus-within {
          border-color: var(--login-accent);
          box-shadow: 0 0 0 4px var(--login-ring);
          background: #ffffff;
          background: color-mix(in oklab, var(--login-bg) 70%, white);
        }
        .field input {
          width: 100%;
          background: transparent;
          border: 0;
          outline: none;
          padding: .7rem .6rem;
          color: var(--login-text);
          font-size: 1rem;
        }
        .field .clear-btn {
          appearance: none;
          border: 0;
          background: transparent;
          font-size: 20px;
          line-height: 1;
          cursor: pointer;
          padding: .3rem .55rem;
          color: var(--login-muted);
          display: none;
        }
        .field .clear-btn:hover { color: var(--login-text); }
        .hint {
          display: block;
          color: var(--login-muted);
          font-size: .85rem;
          margin-top: .35rem;
          padding-left: .25rem;
        }

        /* ====== Кнопка Войти ====== */
        #login-button.carousel-button {
          width: auto;
          height: auto;
          margin: 0;
          display: inline-flex;
          align-items: center;
          justify-content: center;
          opacity: 1;
          pointer-events: auto;
          text-shadow: none;
          font-size: 1rem;
          line-height: 1.2;
          font-weight: 600;
          font-family: "Fira Code", monospace;
          padding: .65rem 1.1rem;
          border-radius: 12px;
          background: var(--login-accent);
          color: #1a1a1a;
          border: 1px solid color-mix(in oklab, var(--login-accent) 72%, #9a6200);
          box-shadow: 0 6px 14px rgba(255, 160, 1, 0.24);
          transition: transform .08s ease, background-color .15s ease, box-shadow .15s ease;
        }

        /* Контраст и акцент кнопки "Войти" в тёмной теме */
        :root[data-theme="dark"] #login-button.carousel-button {
          color: #141414;
          border-color: color-mix(in oklab, var(--login-accent) 68%, #8b5700);
          box-shadow: 0 7px 16px rgba(255, 160, 1, 0.3);
        }

        #login-button.carousel-button:hover {
          background: color-mix(in oklab, var(--login-accent) 84%, white);
          box-shadow: 0 8px 18px rgba(255, 160, 1, 0.28);
        }
        #login-button.carousel-button:active {
          transform: translateY(1px);
        }
        #login-button[disabled] {
          opacity: .6;
          cursor: not-allowed;
          box-shadow: none;
        }

        /* ====== Чек-лист — одна карточка в ряд ====== */
        .checks-grid {
          display: grid;
          grid-template-columns: 1fr; /* строго одна колонка */
          gap: .6rem;
        }
        .check-card {
          background: var(--login-card);
          border: 1px solid var(--login-border);
          border-radius: 12px;
          padding: .75rem .75rem .6rem;
          display: grid;
          gap: .55рем;
        }
        .check-text { color: var(--login-text); }
        .check-actions {
          display: flex;
          gap: .5rem;
          flex-wrap: wrap;
          align-items: center;
          justify-content: space-between;
        }
        .check-buttons { display: flex; gap: .5rem; }
        .btn {
          appearance: none;
          border: 1px solid var(--login-border);
          background: var(--login-bg);
          color: var(--login-text);
          padding: .45rem .7rem;
          border-radius: 10px;
          cursor: pointer;
          font-size: .9rem;
          transition: background .15s ease, border-color .15s ease, color .15s ease, transform .05s ease;
        }
        .btn:hover { background: #ffffff; background: color-mix(in oklab, var(--login-bg) 60%, white); }
        .btn:active { transform: translateY(1px); }
        .btn-ok   { border-color: color-mix(in oklab, var(--ok) 40%, var(--login-border)); }
        .btn-bad  { border-color: color-mix(in oklab, var(--bad) 40%, var(--login-border)); }
        .status {
          font-size: .85rem;
          margin-left: auto;
          padding: .2rem .5rem;
          border-radius: 999px;
          border: 1px solid var(--login-border);
          color: var(--login-muted);
        }
        .status.ok { color: var(--ok); border-color: color-mix(in oklab, var(--ok) 40%, var(--login-border)); }
        .status.bad { color: var(--bad); border-color: color-mix(in oklab, var(--bad) 40%, var(--login-border)); }
        .status.pending { color: var(--pending); }
        .check-eval {
          display: none;
          border-top: 1px dashed var(--login-border);
          padding-top: .5rem;
          margin-top: .2rem;
          font-size: .85rem;
          color: var(--login-muted);
        }
        .check-eval.show { display: block; }
        .check-eval .eval-row { margin: .15rem 0; }
        .check-eval .eval-row strong { color: var(--login-text); }
        .check-eval.ok .eval-summary { color: var(--login-accent-2); }
        .check-eval.bad .eval-summary { color: var(--login-accent); }

        .checks-verify-wrap {
          margin-top: .75rem;
          display: grid;
          gap: .6rem;
        }
        .regress-btn {
          width: 100%;
          border: 1px solid var(--login-border);
          background: var(--login-bg);
          color: var(--login-text);
          padding: .6rem .75rem;
          border-radius: 10px;
          cursor: pointer;
          font-size: .95rem;
          font-family: "Fira Code", monospace;
        }
        .regress-btn:hover {
          background: color-mix(in oklab, var(--login-bg) 70%, white);
          border-color: var(--login-accent);
        }
        .regress-result {
          display: none;
          border: 1px solid var(--login-border);
          border-radius: 10px;
          padding: .6rem .7rem;
          background: color-mix(in oklab, var(--login-card) 94%, var(--login-bg));
        }
        .regress-result.show { display: block; }
        .regress-title {
          margin: 0 0 .45rem 0;
          color: var(--login-text);
          font-size: .9rem;
          font-family: "Fira Code", monospace;
        }
        .regress-bar {
          width: 100%;
          height: 10px;
          border-radius: 999px;
          background: color-mix(in oklab, var(--login-accent) 35%, var(--login-bg));
          overflow: hidden;
        }
        .regress-fill {
          height: 100%;
          width: 0%;
          background: var(--login-accent-2);
          transition: width .25s ease;
        }
        .regress-meta {
          margin-top: .4rem;
          color: var(--login-muted);
          font-size: .85rem;
        }

        /* Утилиты */
        .sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0; }
    </style>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function(m,e,t,r,i,k,a){
            m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
            m[i].l=1*new Date();
            for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
            k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
        })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=104705360', 'ym');

        ym(104705360, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/104705360" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
</head>
<body>
<div class="site-header">
<nav>
    <ul>
        <li><a href="hwois.html">Кто такой тестировщик?</a></li>
        <li><a href="roadmap.html">Roadmap</a></li>
        <li><a href="questions.html">Вопросы</a></li>
        <li><a href="interview.html">Интервью</a></li>
        <li><a href="practice.html">Практика</a></li>
    </ul>
</nav>

<!-- Хэддер (не трогаем) -->
<div class="login-scope">
    <header class="welcome">
        <div class="header-container">
            <div class="logo"
                 style="cursor: pointer;"
                 onclick="window.location.href='index.html'">
                <img src="img/QAtoDev_(Flappy_Bird_style).png" alt="Логотип">
            </div>
            <h3 class="site-title">На главную</h3>
        </div>
        
    </header>
</div>
<div class="theme-switcher">
            <button
                    id="theme-toggle"
                    class="clean-btn toggleButton_gllP"
                    type="button"
                    title="Переключить тему"
                    aria-label="Переключить тему"
                    aria-live="polite"
            >
                <!-- Солнце для светлой темы -->
                <svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR">
                    <path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path>
                </svg>
                <!-- Полумесяц для тёмной темы -->
                <svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR">
                    <path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path>
                </svg>
            </button>
        </div>
</div>

    <!-- ЗАДАНИЕ-СЛАЙДЕР (заместо заголовка) -->
    <section class="task-slider" role="region" aria-label="Задание">
        <div class="task-slider-header">
            <h2 class="task-slider-title">Задание</h2>
        </div>
        <div class="task-viewport" id="taskViewport">
            <div class="task-track" id="taskTrack" style="transform: translateX(0%);">
                <div class="task-slide" data-idx="0">
                    <p class="task-item"> Проверь логин-форму по чек-листу справа — отметь <i>Passed</i> / <i>Failed</i> для каждого пункта.</p>
                </div>
                <div class="task-slide" data-idx="1">
                    <p class="task-item"> Сформируй <i>3 тест-кейса</i> для авторизации, по которым ты проведешь регресс.</p>
                </div>
                <div class="task-slide" data-idx="2">
                    <p class="task-item"> Проведи <i>ad-hoc</i> тестирование и зафиксируй наблюдения/идеи улучшений.</p>
                </div>
                <div class="task-slide" data-idx="3">
                    <p class="task-item"> Предложи, какие проверки <i>убрать/добавить</i> в чек-лист и почему.</p>
                </div>
            </div>
        </div>
        <div class="task-pagination" role="tablist" aria-label="Переключение заданий">
            <button type="button" class="task-dot" data-go="0" aria-pressed="true" aria-label="Задание 1">1</button>
            <button type="button" class="task-dot" data-go="1" aria-pressed="false" aria-label="Задание 2">2</button>
            <button type="button" class="task-dot" data-go="2" aria-pressed="false" aria-label="Задание 3">3</button>
            <button type="button" class="task-dot" data-go="3" aria-pressed="false" aria-label="Задание 4">4</button>
        </div>
    </section>

    <!-- ДВЕ КОЛОНКИ: слева форма (sticky), справа чек-лист (скролл, 1 в ряд) -->
    <section class="login-layout" aria-label="Логин и чек-лист">
        <!-- ЛЕВАЯ КОЛОНКА -->
        <div class="login-left">
            <section class="login-wrap">
                <!-- Инлайн-ошибка -->
                <div id="inline-error" class="inline-error" role="alert" aria-live="polite"></div>

                <!-- Свитчер способа входа -->
                <div class="segmented" id="login-segmented" data-active="phone" role="tablist" aria-label="Способ входа">
                    <span class="thumb" aria-hidden="true"></span>
                    <button type="button" id="tab-phone" role="tab" aria-selected="true" aria-pressed="true">Телефон</button>
                    <button type="button" id="tab-email" role="tab" aria-selected="false" aria-pressed="false">Email</button>
                </div>

                <form id="login-form" novalidate>
                    <!-- Телефон -->
                    <div id="phone-container" class="input-container">
                        <label for="phone-input" class="sr-only">Номер телефона</label>
                        <div class="field">
                            <input type="tel" id="phone-input" placeholder="+7 (___) ___-__-__" inputmode="tel" autocomplete="tel" />
                            <button type="button" class="clear-btn" id="clear-phone" aria-label="Очистить">&times;</button>
                        </div>
                        <small class="hint">Номер должен содержать 11 цифр (вместе с +7)</small>
                    </div>

                    <!-- Email -->
                    <div id="email-container" class="input-container" style="display:none;">
                        <label for="email-input" class="sr-only">Email</label>
                        <div class="field">
                            <input type="email" id="email-input" placeholder="primer@mail.ru" autocomplete="email" />
                            <button type="button" class="clear-btn" id="clear-email" aria-label="Очистить">&times;</button>
                        </div>
                        <small class="hint">Введите корректный email</small>
                    </div>

                    <!-- Пароль -->
                    <div class="input-container">
                        <label for="password-input" class="sr-only">Пароль</label>
                        <div class="field">
                            <input type="password" id="password-input" placeholder="Пароль" autocomplete="current-password" />
                            <button type="button" class="clear-btn" id="clear-password" aria-label="Очистить">&times;</button>
                        </div>
                        <small id="password-strength" class="hint"></small>
                    </div>

                    <!-- Кнопка входа -->
                    <div style="display:flex; justify-content:center; margin-top:.25rem;">
                        <button type="button" id="login-button" class="carousel-button">Войти</button>
                    </div>
                </form>
            </section>
        </div>

        <!-- ПРАВАЯ КОЛОНКА -->
        <div class="login-right">
            <section class="checks-panel" role="region" aria-label="Список проверок">
                <h3 class="checks-title">Список проверок (чек-лист)</h3>
                <div id="checks-grid" class="checks-grid" aria-live="polite"></div>
                <div class="checks-verify-wrap">
                    <button type="button" id="regress-check-btn" class="regress-btn">Проверить регресс</button>
                    <div id="regress-result" class="regress-result" aria-live="polite">
                        <p class="regress-title">Корректность выполнения регресса</p>
                        <div class="regress-bar">
                            <div id="regress-fill" class="regress-fill"></div>
                        </div>
                        <div id="regress-meta" class="regress-meta">Пока нет данных</div>
                    </div>
                </div>

                <!-- Шаблон карточки проверки -->
                <template id="check-card-tpl">
                    <div class="check-card" data-id="">
                        <div class="check-text"></div>
                        <div class="check-actions">
                            <div class="check-buttons">
                                <button class="btn btn-bad btn-failed" type="button" aria-pressed="false">Failed</button>
                                <button class="btn btn-ok btn-passed"  type="button" aria-pressed="false">Passed</button>
                            </div>
                            <span class="status pending">Статус: не проверено</span>
                        </div>
                        <div class="check-eval"></div>
                    </div>
                </template>
            </section>
        </div>
    </section>
</div>

<footer class="qatodev">
    <p>
        <a href="https://t.me/QAtoDev" target="_blank" style="background-color:#FFA001;">Telegram</a>
        <a href="https://set.ki/channel/PJnPK69" target="_blank" style="background-color:#FFA001;">Сетка</a>
    </p>
</footer>

<!-- Скрипты темы (оставляем без изменений) -->
<script>
    (function() {
      const root = document.documentElement;
      const btn  = document.getElementById('theme-toggle');
      const saved = localStorage.getItem('theme');
      if (saved === 'dark' || saved === 'light') {
        root.setAttribute('data-theme', saved);
        btn.classList.toggle('active', saved === 'dark');
      }
      btn.addEventListener('click', () => {
        const next = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        root.setAttribute('data-theme', next);
        localStorage.setItem('theme', next);
        btn.classList.toggle('active', next === 'dark');
      });
    })();
</script>
<script>
    (function() {
      const imgs = [
        'img/QAtoDev_(Flappy_Bird_style).png',
        'img/QAtoDev_Classic.png',
        'img/QAtoDev_new_year.png',
        'img/QAtoDev_DayQA.png',
        'img/QAtoDev_Halloween.png',
        'img/QAtoDev_BlackAndWhite.png',
        'img/QAtoDev_CoverChatChannel.png'
      ];
      let idx = parseInt(localStorage.getItem('logoIdx'), 10);
      if (isNaN(idx) || idx < 0 || idx >= imgs.length) idx = 0;
      const logoImg    = document.querySelector('.logo img');
      const faviconTag = document.querySelector('link[rel="icon"]');
      function updateLogo() {
        const src = imgs[idx];
        if (logoImg)    logoImg.src    = src;
        if (faviconTag) faviconTag.href = src;
      }
      updateLogo();
      setInterval(() => {
        idx = (idx + 1) % imgs.length;
        localStorage.setItem('logoIdx', idx);
        updateLogo();
      }, 50000);
    })();
</script>

<!-- Логика страницы логина -->
<script>
    document.addEventListener('DOMContentLoaded', function(){

      /* --- Слайдер ЗАДАНИЯ --- */
      (function initTaskSlider(){
        const track = document.getElementById('taskTrack');
        const dots = Array.from(document.querySelectorAll('.task-dot'));
        const TOTAL = 4;
        let current = 0;

        function goTo(idx) {
          const i = Math.max(0, Math.min(TOTAL - 1, idx));
          current = i;
          const offset = -(i * 25); /* т.к. каждая карточка = 25% ширины трека */
          track.style.transform = 'translateX(' + offset + '%)';
          dots.forEach((d, n) => d.setAttribute('aria-pressed', n === i ? 'true' : 'false'));
        }

        dots.forEach(btn => {
          btn.addEventListener('click', () => {
            const idx = parseInt(btn.dataset.go, 10);
            goTo(idx);
          });
        });

        // Стрелки клавиатуры для доступности
        document.addEventListener('keydown', (e) => {
          if (e.key === 'ArrowRight') goTo(current + 1);
          if (e.key === 'ArrowLeft')  goTo(current - 1);
        });

        // Инициализация
        goTo(0);
      })();

      /* --- Свитчер Телефон/Email --- */
      const segmented   = document.getElementById('login-segmented');
      const tabPhone    = document.getElementById('tab-phone');
      const tabEmail    = document.getElementById('tab-email');
      const phoneBox    = document.getElementById('phone-container');
      const emailBox    = document.getElementById('email-container');

      function activate(mode) {
        segmented.setAttribute('data-active', mode);
        const phoneActive = mode === 'phone';
        tabPhone.setAttribute('aria-pressed', phoneActive ? 'true' : 'false');
        tabPhone.setAttribute('aria-selected', phoneActive ? 'true' : 'false');
        tabEmail.setAttribute('aria-pressed', !phoneActive ? 'true' : 'false');
        tabEmail.setAttribute('aria-selected', !phoneActive ? 'true' : 'false');
        phoneBox.style.display = phoneActive ? 'block' : 'none';
        emailBox.style.display = phoneActive ? 'none' : 'block';
      }
      tabPhone.addEventListener('click', () => activate('phone'));
      tabEmail.addEventListener('click', () => activate('email'));

      /* --- Крестики очистки --- */
      function setupClear(inputId, btnId){
        const input = document.getElementById(inputId);
        const btn   = document.getElementById(btnId);
        function toggle() { btn.style.display = input.value ? 'inline' : 'none'; }
        input.addEventListener('input', toggle);
        btn.addEventListener('click', () => { input.value=''; input.dispatchEvent(new Event('input')); input.focus(); });
        toggle();
      }
      setupClear('phone-input','clear-phone');
      setupClear('email-input','clear-email');
      setupClear('password-input','clear-password');

      /* --- Маска телефона --- */
      const phoneInput = document.getElementById('phone-input');
      if (phoneInput) {
        phoneInput.addEventListener('input', function(){
          let val = phoneInput.value.replace(/\D/g, '');
          if (val.startsWith('8')) val = '7' + val.slice(1);
          if (!val.startsWith('7')) val = '7' + val;
          let formatted = '+7';
          if (val.length > 1)  formatted += ' (' + val.slice(1,4);
          if (val.length >= 4) formatted += ') ' + val.slice(4,7);
          if (val.length >= 7) formatted += '-' + val.slice(7,9);
          if (val.length >= 9) formatted += '-' + val.slice(9,11);
          phoneInput.value = formatted;
        });
      }

      /* --- Сила пароля --- */
      const pwdInput = document.getElementById('password-input');
      const strengthText = document.getElementById('password-strength');
      if (pwdInput && strengthText) {
        pwdInput.addEventListener('input', function(){
          const v = pwdInput.value;
          let score=0;
          if(v.length>=6) score++;
          if(/[a-z]/.test(v) && /[A-Z]/.test(v)) score++;
          if(/\d/.test(v)) score++;
          if(/[\W_]/.test(v)) score++;
          let text='', color='';
          if(score<=1){ text='Лёгкий'; color='var(--bad)'; }
          else if(score==2){ text='Средний'; color='orange'; }
          else{ text='Достойный'; color='var(--ok)'; }
          strengthText.textContent = text;
          strengthText.style.color = color;
        });
      }

      /* --- Отправка запроса (инлайн-ошибка вместо модалки) --- */
      const loginBtn = document.getElementById('login-button');
      const emailInput = document.getElementById('email-input');
      const inlineError = document.getElementById('inline-error');

      function showInlineError(message, details) {
        inlineError.classList.add('show');
        inlineError.innerHTML = message + (details ? '<small>' + details + '</small>' : '');
      }
      function hideInlineError() {
        inlineError.classList.remove('show');
        inlineError.textContent = '';
      }

      loginBtn.addEventListener('click', async function(){
        hideInlineError();

        const selectedMethod = segmented.getAttribute('data-active') === 'email' ? 'email' : 'phone';
        const password = (pwdInput.value || '');
        const rawPhoneDigits = (phoneInput.value || '').replace(/\D/g, '');
        const phoneNormalized = rawPhoneDigits.startsWith('7') ? rawPhoneDigits : ('7' + rawPhoneDigits);
        const email = (emailInput.value || '').trim();

        const payload = {
          method: selectedMethod,
          phone:  selectedMethod === 'phone' ? phoneNormalized : null,
          email:  selectedMethod === 'email' ? email : null,
          password: password
        };

        const LOGIN_ENDPOINT = 'https://httpstat.us/500?sleep=800';

        const originalText = loginBtn.textContent;
        loginBtn.disabled = true;
        loginBtn.textContent = 'Входим...';

        try {
          const resp = await fetch(LOGIN_ENDPOINT, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });

          let respText = '';
          try { respText = await resp.text(); } catch(e) {}

          console.group('Результат логина');
          console.log('URL:', LOGIN_ENDPOINT);
          console.log('Статус:', resp.status, 'OK:', resp.ok);
          console.log('Тело ответа:', respText);
          console.log('Payload:', payload);
          console.groupEnd();

          if (!resp.ok) {
            showInlineError('Упс! Не можем впустить Вас. Попробуйте позже.', 'HTTP ' + resp.status);
            return;
          }

          console.info('Успешный вход (демо).');

        } catch (err) {
          console.error('Network/Fetch error:', err);
          showInlineError('Что-то пошло не так', String(err));
        } finally {
          loginBtn.disabled = false;
          loginBtn.textContent = originalText;
        }
      });

      /* --- Чек-лист (плашки справа, 1 в ряд) --- */
      const CHECKS = [
        { id: 'mask-default-plus7',      text: 'По умолчанию в поле ввода телефона маска +7 ХХХ ХХХ ХХ ХХ', expected: 'bad' },
        { id: 'enter-7-autoprefix',      text: 'Ввод цифры 7 приводит к автоподстановке маски +7', expected: 'ok' },
        { id: 'enter-not7-add-plus7',    text: 'Если первая введённая цифра — не 7, к номеру автоматически проставляется +7', expected: 'ok' },
        { id: 'clear-cross-appears',     text: 'При вводе первой цифры отображается крестик — нажатие удаляет данные в поле', expected: 'bad' },
        { id: 'clear-cross-disappears',  text: 'Крестик пропадает, если поле очищено', expected: 'ok' },
        { id: 'checkpass6',              text: 'Нет возможности в поле телефон ввести символы и буквы (только цифры)', expected: 'ok' },
        { id: 'checkpass7',              text: 'Под полем телефона отображается подсказка про 11 цифр', expected: 'ok' },
        { id: 'checkpass8',              text: 'При переключении способа входа — введённые данные сохраняются', expected: 'ok' },
        { id: 'checkpass9',              text: 'Стереть данные можно backspace и Ctrl/⌘+A → Delete', expected: 'bad' },
        { id: 'checkpass10',             text: 'При вводе пароля подсвечивается статус защищенности', expected: 'ok' },
        { id: 'checkpass11',             text: 'При вводе первого символа пароля появляется крестик', expected: 'ok' },
        { id: 'checkpass12',             text: 'Нажатие на крестик стирает пароль + пропадает статус', expected: 'bad' },
        { id: 'checkpass13',             text: 'Статусы: лёгкий / средний / достойный', expected: 'ok' },
        { id: 'checkpass14',             text: '«Достойный»: цифры + нижний/верхний регистр + символы (≥ 8)', expected: 'bad' },
        { id: 'checkpass15',             text: '«Средний»: есть цифры и буквы (≤ 8)', expected: 'ok' },
        { id: 'checkpass16',             text: 'Кнопка «Войти» отправляет POST-запрос', expected: 'ok' },
        { id: 'checkpass17',             text: 'Логин и пароль передаются в теле запроса (демо)', expected: 'ok' },
        { id: 'checkpass18',             text: 'При ошибке входа отображается сообщение об ошибке', expected: 'ok' },
        { id: 'checkpass21',             text: 'Вкладка Email содержит поля Email и Пароль', expected: 'ok' },
        { id: 'checkpass22',             text: 'Проверка формата email включает @ и домен', expected: 'bad' },
        { id: 'checkpass23',             text: 'При нарушении маски email — подсказка под полем', expected: 'bad' },
        { id: 'checkpass24',             text: 'Подсказка: «Введите корректный email»', expected: 'ok' },
        { id: 'checkpass25',             text: 'После обновления страницы выбранный способ и введённые данные сохраняются', expected: 'ok' }
      ];

      const LS_KEY = 'qa_checks_status__LOGIN_INLINE';
      const grid   = document.getElementById('checks-grid');
      const tpl    = document.getElementById('check-card-tpl');
      const regressBtn = document.getElementById('regress-check-btn');
      const regressResult = document.getElementById('regress-result');
      const regressFill = document.getElementById('regress-fill');
      const regressMeta = document.getElementById('regress-meta');

      function readStatuses(){
        try {
          const raw = localStorage.getItem(LS_KEY);
          const parsed = raw ? JSON.parse(raw) : {};
          return (parsed && typeof parsed === 'object') ? parsed : {};
        } catch(e){ return {}; }
      }
      function writeStatuses(map){
        try { localStorage.setItem(LS_KEY, JSON.stringify(map)); } catch(e){}
      }

      function applyStatus(card, status) {
        const stEl = card.querySelector('.status');
        const btnF = card.querySelector('.btn-failed');
        const btnP = card.querySelector('.btn-passed');

        stEl.classList.remove('ok','bad','pending');
        btnF.setAttribute('aria-pressed','false');
        btnP.setAttribute('aria-pressed','false');

        if (status === 'ok') {
          stEl.textContent = 'Статус: успешно';
          stEl.classList.add('ok');
          btnP.setAttribute('aria-pressed','true');
        } else if (status === 'bad') {
          stEl.textContent = 'Статус: баг';
          stEl.classList.add('bad');
          btnF.setAttribute('aria-pressed','true');
        } else {
          stEl.textContent = 'Статус: не проверено';
          stEl.classList.add('pending');
        }
      }

      function labelByStatus(status){
        if (status === 'ok') return 'Passed';
        if (status === 'bad') return 'Failed';
        return 'Не выбрано';
      }

      function evaluateRegression(){
        const panel = regressBtn.closest('.checks-panel');

        const statuses = readStatuses();
        const cardsById = new Map(
          Array.from(grid.querySelectorAll('.check-card')).map(card => [card.dataset.id, card])
        );

        let matches = 0;
        CHECKS.forEach(ch => {
          const userStatus = statuses[ch.id] || 'pending';
          const expectedStatus = ch.expected || 'ok';
          const isMatch = userStatus === expectedStatus;
          if (isMatch) matches++;

          const card = cardsById.get(ch.id);
          if (!card) return;
          const evalBox = card.querySelector('.check-eval');
          evalBox.classList.remove('ok', 'bad');
          evalBox.classList.add('show', isMatch ? 'ok' : 'bad');
          evalBox.innerHTML =
            '<div class="eval-row"><strong>Вы выбрали:</strong> ' + labelByStatus(userStatus) + '</div>' +
            '<div class="eval-row"><strong>Верный ответ:</strong> ' + labelByStatus(expectedStatus) + '</div>' +
            '<div class="eval-row eval-summary"><strong>' + (isMatch ? 'Совпало' : 'Не совпало') + '</strong></div>';
        });

        const total = CHECKS.length;
        const percent = total ? Math.round((matches / total) * 100) : 0;
        regressResult.classList.add('show');
        regressFill.style.width = percent + '%';
        regressFill.style.background = 'var(--login-accent-2)';
        regressMeta.textContent = 'Верно: ' + matches + ' из ' + total + ' (' + percent + '%)';

        // После рендера доводим скролл панели до блока результата.
        requestAnimationFrame(() => {
          const panelScrollable = panel
            && panel.scrollHeight > panel.clientHeight + 1
            && getComputedStyle(panel).overflowY !== 'visible';

          if (panelScrollable) {
            const resultBottom = regressResult.offsetTop + regressResult.offsetHeight;
            const targetTop = Math.max(0, resultBottom - panel.clientHeight + 12);
            panel.scrollTo({ top: targetTop, behavior: 'smooth' });
            return;
          }
          const rect = regressResult.getBoundingClientRect();
          const deltaDown = rect.bottom - window.innerHeight + 12;
          if (deltaDown > 0) {
            window.scrollBy({ top: deltaDown, left: 0, behavior: 'smooth' });
            return;
          }
          regressResult.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        });
      }

      function renderChecks(){
        const statuses = readStatuses();
        grid.innerHTML = '';
        CHECKS.forEach(ch => {
          const node = tpl.content.firstElementChild.cloneNode(true);
          node.dataset.id = ch.id;
          node.querySelector('.check-text').textContent = ch.text;
          applyStatus(node, statuses[ch.id] || 'pending');

          node.querySelector('.btn-failed').addEventListener('click', () => {
            statuses[ch.id] = 'bad';
            writeStatuses(statuses);
            applyStatus(node, 'bad');
          });
          node.querySelector('.btn-passed').addEventListener('click', () => {
            statuses[ch.id] = 'ok';
            writeStatuses(statuses);
            applyStatus(node, 'ok');
          });

          grid.appendChild(node);
        });
      }

      function syncMobileChecklistViewport(){
        const panel = document.querySelector('.login-right .checks-panel');
        const formWrap = document.querySelector('.login-left .login-wrap');
        if (!panel || !formWrap) return;

        const isMobile = window.matchMedia('(max-width: 900px)').matches;
        if (!isMobile) {
          panel.style.removeProperty('--mobile-checks-max-h');
          panel.style.removeProperty('max-height');
          panel.style.removeProperty('overflow');
          return;
        }

        const formH = Math.ceil(formWrap.getBoundingClientRect().height);
        const topOffset = 16;
        const reserve = 28;
        const available = Math.floor(window.innerHeight - formH - topOffset - reserve);
        const panelH = Math.max(240, available);
        panel.style.setProperty('--mobile-checks-max-h', panelH + 'px');
      }

      // Персист UI (метод, значения)
      (function persistUI(){
        const phoneInput = document.getElementById('phone-input');
        const emailInput = document.getElementById('email-input');
        const pwdInput   = document.getElementById('password-input');

        const saved = JSON.parse(localStorage.getItem('login_form__persist') || '{}');
        if (saved.method) activate(saved.method);
        if (saved.phone)  { phoneInput.value   = saved.phone;  phoneInput.dispatchEvent(new Event('input')); }
        if (saved.email)  { emailInput.value   = saved.email;  emailInput.dispatchEvent(new Event('input')); }
        if (saved.pass)   { pwdInput.value     = saved.pass;    pwdInput.dispatchEvent(new Event('input')); }

        function save() {
          localStorage.setItem('login_form__persist', JSON.stringify({
            method: segmented.getAttribute('data-active'),
            phone: phoneInput.value,
            email: emailInput.value,
            pass:  pwdInput.value
          }));
        }
        ['input','change','blur'].forEach(ev => {
          phoneInput.addEventListener(ev, save);
          emailInput.addEventListener(ev, save);
          pwdInput.addEventListener(ev, save);
          tabPhone.addEventListener('click', save);
          tabEmail.addEventListener('click', save);
        });
      })();

      renderChecks();
      syncMobileChecklistViewport();
      window.addEventListener('resize', syncMobileChecklistViewport, { passive: true });
      window.addEventListener('orientationchange', syncMobileChecklistViewport, { passive: true });
      regressBtn.addEventListener('click', evaluateRegression);
    });
</script>
  <script src="header.js"></script>
</body>
</html>
